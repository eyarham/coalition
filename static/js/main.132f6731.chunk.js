(this.webpackJsonpcoalition=this.webpackJsonpcoalition||[]).push([[0],{131:function(e,t,n){},133:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(48),u=n.n(a),i=n(43),s=(n(131),n(21)),o=n(0),j=n.n(o),b=n(3),l=n(7),f=(n(133),n(1)),p=function(e){var t=e.headerText,n=e.children,c=Object(r.useState)(),a=Object(l.a)(c,2),u=a[0],i=a[1];return Object(f.jsxs)("div",{className:"expand-box",children:[Object(f.jsx)("div",{className:"expand-box-header",onClick:function(e){i(!u)},children:t}),u&&Object(f.jsx)("div",{className:"expand-box-children",children:n})]})},d=n(26),O=n(11),x=n(24),v={getAuth:d.b,collection:O.b,doc:O.d,getDoc:O.e,getFirestore:O.g,setDoc:O.j,deleteDoc:O.c},h=function(e){var t=function(){return v.getAuth().currentUser},n=function(t){var n=v.getFirestore();return v.doc(n,e,t)},r=function(){var t=v.getFirestore();return v.collection(t,e)},c=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r(),c=Object(O.i)(n),a=Object(O.h)(c,(function(e){t(e)})),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(t),e.next=3,v.getDoc(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(b.a)(j.a.mark((function e(t,r){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(O.h)(n(t),(function(e){r(e)})),e.abrupt("return",c);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(b.a)(j.a.mark((function e(n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(x.a)({createdBy:t().uid,createdDate:new Date},n),e.next=3,Object(O.a)(r(),c);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(b.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.setDoc(n(t),r);case 2:return e.next=4,a(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.deleteDoc(n(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.i)(r(),Object(O.k)("coalitionId","==",t)),e.next=3,Object(O.f)(n);case 3:return c=e.sent,e.abrupt("return",c.docs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getCurrentUser:t,createDoc:i,getDocRef:n,getCollection:r,getById:a,set:s,deleteDocument:o,getByCoalitionId:l,getByCoalitionIdSub:function(e,t){var n=Object(O.i)(r(),Object(O.k)("coalitionId","==",e));return Object(O.h)(n,(function(e){t(e.docs)}))},getByIdSub:u,getDocsSub:c}},m=function(){var e=window.location.origin;return"https://eyarham.github.io"===e?e+"/coalition":e},w=h("memberships"),y=w.getDocRef,k=w.getCollection,g=w.getByCoalitionIdSub,C=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={coalitionId:t,memberId:n},e.next=3,Object(O.a)(k(),r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:return t=e.sent,n=Object(O.i)(k(),Object(O.k)("memberId","==",t)),e.next=6,Object(O.f)(n);case 6:return r=e.sent,c=[],r.forEach((function(e){c.push(e.data().coalitionId)})),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=O.i,e.t1=k(),e.t2=O.k,e.next=5,ue();case 5:return e.t3=e.sent,e.t4=(0,e.t2)("memberId","==",e.t3),e.t5=Object(O.k)("coalitionId","==",t),n=(0,e.t0)(e.t1,e.t4,e.t5),e.next=11,Object(O.f)(n);case 11:return r=e.sent,e.abrupt("return",r.docs[0]);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.i)(k(),Object(O.k)("coalitionId","==",t)),e.next=3,Object(O.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(O.i)(k(),Object(O.k)("coalitionId","==",t)),e.abrupt("return",Object(O.h)(r,(function(e){n(e.docs)})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return n=e.sent,e.abrupt("return",n.length);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N(t,(function(e){n(e.length)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:if(n=e.sent,e.t0=1===n.length&&n[0].data(),!e.t0){e.next=10;break}return e.t1=n[0].data().memberId,e.next=8,ue();case 8:e.t2=e.sent,e.t0=e.t1===e.t2;case 10:if(!e.t0){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return n=e.sent,e.next=5,T(n.data().coalitionId);case 5:if(!(e.sent>1)){e.next=11;break}return e.next=9,Object(O.c)(y(n.id));case 9:e.next=12;break;case 11:throw new Error("Can not delete last member.");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(O.i)(k(),Object(O.k)("memberId","==",t),Object(O.k)("coalitionId","==",n)),a=Object(O.h)(c,(function(e){e&&e.docs&&e.docs.length>0?r(!0):r(!1)})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:return n=e.sent,r=Object(O.i)(k(),Object(O.k)("memberId","==",n),Object(O.k)("coalitionId","==",t)),e.next=6,Object(O.f)(r);case 6:if(!((c=e.sent)&&c.docs&&c.docs.length>0)){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g(t,function(){var e=Object(b.a)(j.a.mark((function e(t){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],c=t.map(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c,a,u,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data(),c=n.memberId,e.next=3,te(c);case 3:a=e.sent,u=a.data(),i=u.displayName,r.push({memberId:c,displayName:i});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(c);case 4:n(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=h("rules"),F=_.getByCoalitionId,V=(_.getByCoalitionIdQuery,_.createDoc),M=_.set,z=_.getByCoalitionIdSub,G=_.deleteDocument,Y=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t);case 2:if(r=e.sent,!((c=r.filter((function(e){return e.data().name===n}))).length>0)){e.next=6;break}return e.abrupt("return",c[0]);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,function(){var e=Object(b.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.filter((function(e){return e.data().name===n}))).length>0?r(a[0]):c(new Error("no such rule"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return c(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}(),W=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={coalitionId:t,name:n,value:r},e.next=3,V(c);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),J=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r,c){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={coalitionId:t,name:n,type:r,value:c},e.next=3,V(a);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t,n);case 2:return c=e.sent,a=Object(x.a)(Object(x.a)({},c.data()),{},{value:r}),e.next=6,M(c.id,a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Q=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r,c,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,n,(function(e){e&&c(e.data().value===r)}),(function(e){a&&a(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,c,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,"Public",n);case 2:return e.next=4,W(t,"ShowUserNames",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),X=h("users"),Z=X.getCurrentUser,$=X.getCollection,ee=X.set,te=X.getById,ne=X.getByIdSub,re=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userId:t,authId:t,displayName:"",createdBy:Z().uid},e.next=3,Object(O.a)($(),n);case 3:return r=e.sent,e.next=6,Object(O.e)(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Z(),e.next=3,ie(t.uid);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Z(),e.next=3,ie(t.uid);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Z(),e.next=3,ie(t.uid);case 3:return n=e.sent,e.abrupt("return",n.id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.i)($(),Object(O.k)("userId","==",t)),e.next=3,Object(O.f)(n);case 3:if(!(r=e.sent).empty){e.next=8;break}return e.next=7,Object(O.e)(re(t));case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",r.docs[0]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(O.i)($(),Object(O.k)("userId","==",t)),a=Object(O.h)(c,(function(e){var t=e.docs[0];n(t)}),(function(e){r(e)})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),oe=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Z(),""===n){e.next=4;break}return e.next=4,Object(d.d)(Object(d.b)(),r.email,n);case 4:return e.prev=4,e.next=7,Object(d.f)(r,t);case 7:return e.abrupt("return",{valid:!0});case 10:e.prev=10,e.t0=e.catch(4),e.t1=e.t0.code,e.next="auth/invalid-email"===e.t1?15:"auth/email-already-in-use"===e.t1?16:"auth/requires-recent-login"===e.t1?17:18;break;case 15:return e.abrupt("return",{valid:!1,message:"Please enter a valid email address."});case 16:return e.abrupt("return",{valid:!1,message:"This email is already in use. \nIf you did not create an account with this email, please contact the site administrator."});case 17:return e.abrupt("return",{valid:null});case 18:return e.abrupt("return",{success:!1,message:e.t0.code});case 19:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",Q(n,"ShowUserNames",!0,function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return",ne(t,(function(e){var t=e.data()&&e.data().displayName;r(t)})));case 2:r("Anonymous");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),be=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,te(t);case 4:return n=e.sent,e.abrupt("return",n.data()&&n.data().pronouns);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:return t=e.sent,n=t.data(),r=n.isAdmin,e.abrupt("return",!0===r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=h("systemRules"),pe=fe.createDoc,de=fe.deleteDocument,Oe=fe.getDocsSub,xe=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(x.a)({},t),e.next=3,pe(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(),u=Object(l.a)(a,2),i=u[0],s=u[1],o=Object(r.useState)(),p=Object(l.a)(o,2),d=p[0],O=p[1],x=Object(r.useState)(),v=Object(l.a)(x,2),h=v[0],m=v[1],w=function(){var e=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={name:n,type:i,defaultValue:d,details:h},e.next=4,xe(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)("input",{placeholder:"name",onChange:function(e){c(e.target.value)}})}),Object(f.jsx)("td",{children:Object(f.jsx)("input",{placeholder:"type",onChange:function(e){s(e.target.value)}})}),Object(f.jsx)("td",{children:Object(f.jsx)("input",{placeholder:"defaultValue",onChange:function(e){O(e.target.value)}})}),Object(f.jsx)("td",{children:Object(f.jsx)("input",{placeholder:"details",onChange:function(e){m(e.target.value)}})}),Object(f.jsx)("td",{children:Object(f.jsx)("input",{type:"button",value:"Add",onClick:w})})]})},he=function(e){var t=e.rule,n=e.isAdmin,r=t.data(),c=r.name,a=r.type,u=r.defaultValue,i=r.details,s=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,de(t.id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:c}),Object(f.jsx)("td",{children:a}),Object(f.jsx)("td",{children:u}),Object(f.jsx)("td",{children:i}),n&&Object(f.jsx)("td",{children:Object(f.jsx)("input",{type:"button",value:"delete",onClick:s})})]})},me=function(e){var t=e.isAdmin,n=Object(r.useState)(),c=Object(l.a)(n,2),a=c[0],u=c[1];return Object(r.useEffect)((function(){return Oe((function(e){u(e.docs)}))}),[]),Object(f.jsx)("div",{children:Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"name"}),Object(f.jsx)("th",{children:"type"}),Object(f.jsx)("th",{children:"default value"}),Object(f.jsx)("th",{children:"details"})]})}),Object(f.jsxs)("tbody",{children:[a&&a.map((function(e,n){return Object(f.jsx)(he,{rule:e,isAdmin:t},n)})),t&&Object(f.jsx)(ve,{})]})]})})},we=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),n?Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Admin"}),Object(f.jsx)(p,{headerText:"Rules Admin",children:Object(f.jsx)(me,{isAdmin:n})})]}):Object(f.jsx)("div",{children:"You are not an admin"})},ye=function(){var e=Object(d.b)(),t=Object(s.g)();return Object(r.useEffect)((function(){Object(d.e)(e).then((function(){t("/")})).catch((function(e){}))})),Object(f.jsx)("div",{children:"Logout"})},ke=n(19),ge=h("invites"),Ce=ge.getDocRef,Se=ge.getCollection,Ie=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={coalitionId:t,memberId:n},e.next=3,Object(O.a)(Se(),r);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),De=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=O.i,e.t1=Se(),e.t2=O.k,e.next=5,ue();case 5:return e.t3=e.sent,e.t4=(0,e.t2)("memberId","==",e.t3),e.t5=Object(O.k)("coalitionId","==",t),n=(0,e.t0)(e.t1,e.t4,e.t5),e.next=11,Object(O.f)(n);case 11:if(!(r=e.sent).empty){e.next=24;break}return e.t6=Ie,e.t7=t,e.next=17,ue();case 17:return e.t8=e.sent,e.next=20,(0,e.t6)(e.t7,e.t8);case 20:return c=e.sent,e.abrupt("return",c);case 24:return e.abrupt("return",r.docs[0]);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ce(t),e.next=3,Object(O.e)(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t);case 2:return n=e.sent,r=n.data(),c=r.coalitionId,e.next=6,I(c);case 6:if(!e.sent){e.next=10;break}e.next=17;break;case 10:return e.t0=C,e.t1=c,e.next=14,ue();case 14:return e.t2=e.sent,e.next=17,(0,e.t0)(e.t1,e.t2);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c,a,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m(),r="/#/invite",e.next=4,De(t);case 4:return c=e.sent,a=c.id,u=n+r+("?id="+a),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=h("coalitions"),Ae=Be.getDocRef,Pe=Be.getCollection,Re=Be.deleteDocument,Le=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=t,e.next=4,ue();case 4:return e.t1=e.sent,c={name:e.t0,createdBy:e.t1},e.next=8,Object(O.a)(Pe(),c);case 8:return a=e.sent,console.log("Document written with ID: ",a.id),e.next=12,q(a.id,n,r);case 12:return e.t2=C,e.t3=a.id,e.next=16,ue();case 16:return e.t4=e.sent,e.next=19,(0,e.t2)(e.t3,e.t4);case 19:e.next=24;break;case 21:e.prev=21,e.t5=e.catch(0),console.error("Error adding document: ",e.t5);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.j)(Ae(t),n);case 2:return e.next=4,Me(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:return t=e.sent,e.abrupt("return",Ve(t,function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return n=Object(O.i)(Pe(),Object(O.k)("__name__","in",t)),e.next=5,Object(O.f)(n);case 5:return r=e.sent,e.abrupt("return",r.docs);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(e,t){var n=0,r=e.length;return function(){if(-1===n)return[];var c=n+t,a=e.slice(n,c);return n=c<r?c:-1,a}},Ve=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c,a,u,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],c=Fe(t,10),a=0;case 3:if(!(a<10)){e.next=12;break}return u=c(),e.next=7,n(u);case 7:i=e.sent,r.push.apply(r,Object(ke.a)(i));case 9:a++,e.next=3;break;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Me=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ae(t),e.next=3,Object(O.e)(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return n=e.sent,e.next=5,Me(t);case 5:if(r=e.sent,!n){e.next=8;break}return e.abrupt("return",r);case 8:return e.next=10,We(r);case 10:if(!e.sent){e.next=13;break}return e.abrupt("return",r);case 13:throw new Error("Coalition does not exist or user is not a member.");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(e){return m()+"/#/coalition/"+e},Ye=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t);case 2:return n=e.sent,e.next=5,Me(n.data().coalitionId);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze(t);case 2:return r=e.sent,c=Object(x.a)(Object(x.a)({},r.data()),{},{charter:n}),e.next=6,Ue(r.id,c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),We=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t.id);case 2:if(!((n=e.sent)&&n.length>0)){e.next=10;break}if(!(r=n.filter((function(e){return"Public"===e.data().name})))||1!==r.length){e.next=10;break}if(!0!==r[0].data().value){e.next=9;break}return e.abrupt("return",!0);case 9:case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.f)(Pe());case 2:return t=e.sent,n=t.docs,r=[],e.next=7,Promise.all(n.map(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(t);case 2:if(!e.sent){e.next=5;break}return r.push(t.id),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return c=n.filter((function(e){return r.indexOf(e.id)>-1})),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(t);case 2:if(!0!==e.sent){e.next=11;break}return e.t0=C,e.t1=t.id,e.next=8,ue();case 8:return e.t2=e.sent,e.next=11,(0,e.t0)(e.t1,e.t2);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(e){var t=e.coalition,n=t.data().name;return Object(f.jsxs)("div",{className:"coalition-row",children:[Object(f.jsx)("span",{children:n}),Object(f.jsx)("span",{children:Object(f.jsx)("a",{href:Ge(t.id),children:"Coalition Link"})})]})},qe=(n(136),function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Browse"}),Object(f.jsx)("p",{children:"Here, you can browse all the public coalitions."}),Object(f.jsx)("p",{children:"Click the Coalition Link to navigate to the selected coalition."}),n&&n.map((function(e,t){return Object(f.jsx)(Qe,{coalition:e},t)}))]})}),Xe=Object(r.createContext)(),Ze=function(e){var t=e.children,n=Object(d.b)(),c=Object(r.useState)(),a=Object(l.a)(c,2),u=a[0],i=a[1],s=Object(r.useState)(),o=Object(l.a)(s,2),j=o[0],b=o[1],p=Object(r.useState)(),O=Object(l.a)(p,2),x=O[0],v=O[1];return Object(r.useEffect)((function(){if(x&&x.uid)return se(x.uid,(function(e){b(e)}),(function(e){i(e.message)}))}),[x]),Object(d.c)(n,(function(e){v(e||null)})),void 0===j||null===j?Object(f.jsx)("div",{children:"loading..."}):Object(f.jsxs)(Xe.Provider,{value:{user:j},children:[t,u&&Object(f.jsx)("div",{children:u})]})},$e=Object(r.createContext)(),et=function(e){var t=e.children,n=e.coalitionId,c=Object(r.useContext)(Xe).user,a=Object(r.useState)(),u=Object(l.a)(a,2),i=u[0],s=u[1],o=Object(r.useState)(),p=Object(l.a)(o,2),d=p[0],O=p[1],x=Object(r.useState)(),v=Object(l.a)(x,2),h=v[0],m=v[1],w=Object(r.useState)(),y=Object(l.a)(w,2),k=y[0],g=y[1],C=Object(r.useState)(!1),S=Object(l.a)(C,2),I=S[0],D=S[1],N=Object(r.useState)(!1),E=Object(l.a)(N,2),T=E[0],B=E[1];if(Object(r.useEffect)((function(){return R(c.id,n,B)}),[n,c.id]),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ze(n);case 3:t=e.sent,s(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),g(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(n);case 2:t=e.sent,O(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(r.useEffect)((function(){if(n)return z(n,(function(e){return m(e)}))}),[n]),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i,!e.t0){e.next=7;break}return e.t1=i.data().createdBy,e.next=5,ue();case 5:e.t2=e.sent,e.t0=e.t1===e.t2;case 7:t=e.t0,D(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[i]),void 0===d||void 0===i||void 0===h)return Object(f.jsx)("div",{children:"loading..."});var P={coalition:i,isCreator:I,isOnlyUser:d,rules:h,isMember:T};return Object(f.jsxs)($e.Provider,{value:P,children:[t,k&&Object(f.jsx)("div",{children:k})]})},tt=function(){var e=Object(r.useContext)($e).coalition,t=Object(r.useState)("http://localhost:3000/"),n=Object(l.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,Te(e.id);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.id&&t()}),[e.id]),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:"Invite Link:"}),Object(f.jsx)("input",{type:"button",value:"Copy Invite Link",onClick:function(){navigator.clipboard.writeText(c)}}),Object(f.jsx)("div",{children:Object(f.jsx)("textarea",{disabled:!0,value:c,className:"inviteLinkBox"})})]})},nt=(n(137),function(e){var t=e.userId,n=Object(r.useContext)($e).coalition,c=Object(r.useState)(),a=Object(l.a)(c,2),u=a[0],i=a[1],s=Object(r.useState)(),o=Object(l.a)(s,2),p=o[0],d=o[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,be(t);case 3:n=e.sent,d(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",je(t,n.id,(function(e){i(e)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t,n.id]),Object(f.jsxs)("span",{children:[Object(f.jsx)("span",{children:u}),Object(f.jsxs)("span",{className:"member-pronouns",children:["(",p,")"]})]})}),rt=function(){var e=Object(r.useContext)($e).coalition,t=Object(r.useState)(),n=Object(l.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){return g(e.id,a)}),[e.id]),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:["Member number: ",c&&c.length]}),c&&c.map((function(e,t){if(e){var n=e.data().memberId;return Object(f.jsx)("div",{children:Object(f.jsx)(nt,{userId:n})},t)}return Object(f.jsx)("div",{children:"No info"},t)}))]})},ct=h("messages"),at=ct.createDoc,ut=ct.getByCoalitionIdSub,it=ct.deleteDocument,st=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=n,e.next=4,ue();case 4:return e.t2=e.sent,r={coalitionId:e.t0,text:e.t1,postedBy:e.t2},e.next=8,at(r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ot=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:return n=e.sent,e.abrupt("return",n===t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jt=(n(138),function(e){var t=e.message,n=Object(r.useState)(!1),c=Object(l.a)(n,2),a=c[0],u=c[1],i=Object(r.useState)(!1),s=Object(l.a)(i,2),o=s[0],p=s[1];if(Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=t.data(),r=n.postedBy,e.next=5,ot(r);case 5:c=e.sent,u(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(r.useEffect)((function(){var e=t.data().createdDate,n=e.toDate().toLocaleDateString(),r=e.toDate().toLocaleTimeString();p("".concat(n," ").concat(r))}),[t]),!t)return Object(f.jsx)("div",{children:"loading"});var d=t.data(),O=d.text,x=d.postedBy,v=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(t.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"message-box",children:[Object(f.jsxs)("div",{className:"user-name",children:[Object(f.jsxs)("span",{children:[" ",Object(f.jsx)(nt,{userId:x})]}),Object(f.jsx)("span",{children:a&&Object(f.jsx)("input",{type:"button",value:"X",className:"delete-icon",onClick:v})}),Object(f.jsx)("hr",{})]}),Object(f.jsx)("div",{className:"message-text",children:O}),Object(f.jsxs)("div",{className:"message-footer",children:[Object(f.jsx)("span",{className:"message-date",children:o}),Object(f.jsx)("span",{children:Object(f.jsx)("input",{type:"button",value:"reply",onClick:function(e){},className:"reply-button"})})]})]})}),bt=function(e){var t=e.coalitionId,n=Object(r.useState)(""),c=Object(l.a)(n,2),a=c[0],u=c[1],i=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,st(t,a);case 3:u("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("form",{onSubmit:i,children:[Object(f.jsx)("input",{placeholder:"message",onChange:function(e){u(e.target.value)},value:a}),Object(f.jsx)("input",{type:"submit"})]})},lt=function(){var e=Object(r.useContext)($e),t=e.coalition,n=e.isMember,c=Object(r.useState)(),a=Object(l.a)(c,2),u=a[0],i=a[1],s=Object(r.useState)(),o=Object(l.a)(s,2),j=o[0],b=o[1];return Object(r.useEffect)((function(){b(n)}),[n]),Object(r.useEffect)((function(){return ut(t.id,(function(e){var t=e.sort((function(e,t){return t.data().createdDate-e.data().createdDate}));i(t)}))}),[t.id]),Object(f.jsxs)("div",{children:[u&&u.map((function(e,t){return Object(f.jsx)(jt,{message:e},t)})),j&&Object(f.jsx)(bt,{coalitionId:t.id})]})},ft=h("votes"),pt=ft.getCurrentUser,dt=ft.getCollection,Ot=ft.set,xt=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(t);case 2:if(!(r=e.sent)){e.next=8;break}c={petitionId:t,userId:pt().uid,selection:n},Ot(r.id,c),e.next=11;break;case 8:return a={petitionId:t,userId:pt().uid,selection:n},e.next=11,Object(O.a)(dt(),a);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),vt=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.i)(dt(),Object(O.k)("petitionId","==",t),Object(O.k)("userId","==",pt().uid)),e.next=3,Object(O.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.i)(dt(),Object(O.k)("petitionId","==",t)),e.next=3,Object(O.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mt=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(O.i)(dt(),Object(O.k)("petitionId","==",t)),e.abrupt("return",Object(O.h)(r,(function(e){n(e.docs)})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),wt=h("petitions"),yt=wt.getCurrentUser,kt=wt.getById,gt=wt.getCollection,Ct=wt.set,St=wt.getByCoalitionIdSub,It=(wt.getByIdSub,function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tt(t);case 2:return c=e.sent,a=Object(x.a)({coalitionId:t,petitionType:n,userId:yt().uid,votesNeeded:c,status:"new"},r),e.next=6,Object(O.a)(gt(),a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),Dt=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(t);case 2:return r=e.sent,e.next=5,Ct(t,Object(x.a)(Object(x.a)({},r.data()),{},{status:n}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c,a,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(t);case 2:if(n=e.sent,r=n.data(),c=r.status,a=r.coalitionId,u=c,"new"!==c){e.next=9;break}return e.next=8,Et(a,t);case 8:u=e.sent;case 9:if("passed"!==u&&"passed"!==c){e.next=13;break}return e.next=12,At(t);case 12:u=e.sent;case 13:if("ready"!==u&&"ready"!==c){e.next=16;break}return e.next=16,Pt(t);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Et=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(n);case 2:return r=e.sent,c=r.filter((function(e){return"yes"===e.data().selection})),e.next=6,Tt(t);case 6:if(!((a=e.sent)>0&&c.length>=a)){e.next=11;break}return e.next=10,Dt(n,"passed");case 10:return e.abrupt("return","passed");case 11:return e.abrupt("return","new");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:return n=e.sent,e.next=5,Y(t,"votesNeeded");case 5:if(!(r=e.sent)){e.next=11;break}return c=r.data(),a=c.value,e.abrupt("return",a);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=B(t,(function(e){var r=H(t,"votesNeeded",function(){var t=Object(b.a)(j.a.mark((function t(r){var c,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r?(c=r.data(),a=c.value,n(a)):n(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){n(e)}));return r})),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),At=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(t,"ready");case 2:return e.abrupt("return","ready");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pt=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c,a,u,i,s,o,b,l,f,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(t);case 2:if(n=e.sent,r=n.data(),c=r.petitionType,a=r.coalitionId,u=r.charterText,"1"!==c){e.next=9;break}return e.next=7,He(a,u);case 7:case 13:e.next=19;break;case 9:if("2"!==c){e.next=15;break}return i=n.data(),s=i.ruleName,o=i.type,b=i.value,e.next=13,J(a,s,o,b);case 15:if("3"!==c){e.next=19;break}return l=n.data(),f=l.ruleName,p=l.value,e.next=19,K(a,f,p);case 19:return e.next=21,Dt(t,"complete");case 21:return e.abrupt("return","complete");case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=function(e){var t=e.onTypeChange;return Object(f.jsxs)("select",{onChange:t,children:[Object(f.jsx)("option",{children:"text"}),Object(f.jsx)("option",{children:"boolean"}),Object(f.jsx)("option",{children:"number"})]})},Lt=function(e){var t=e.field,n=e.updateFormValue,c=e.fieldType,a=void 0===c?"text":c,u=Object(r.useState)(!1),i=Object(l.a)(u,2),s=i[0],o=i[1],j=function(e){b(e.target.name,e.target.value)},b=function(e,t){var r='{"'.concat(e,'": "').concat(t,'"}'),c=JSON.parse(r);n(c)};return"type"===t.value?Object(f.jsx)("div",{children:Object(f.jsx)(Rt,{onTypeChange:function(e){n({type:e.target.value})}})}):"boolean"===a&&"value"===t.value?Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:"checkbox",onChange:function(e){var t=!s;o(t),b(e.target.name,t)},name:t.value,placeholder:t.text})}):"number"===a&&"value"===t.value?Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:"number",onChange:j,name:t.value,placeholder:t.text})}):Object(f.jsx)("div",{children:Object(f.jsx)("input",{onChange:j,name:t.value,placeholder:t.text})})},Ut=[{value:0,text:"Text Petition",fields:[{value:"title",text:"Title"},{value:"body",text:"Body"}]},{value:1,text:"Update Charter",fields:[{value:"charterText",text:"Charter Text"}]},{value:2,text:"Rule Add",fields:[{value:"ruleName",text:"Rule Name"},{value:"type",text:"Rule Type"},{value:"value",text:"Rule Value"}]},{value:3,text:"Rule Change",fields:[{value:"ruleName",text:"Rule Name"},{value:"value",text:"Rule Value"}]}],_t=function(e){var t=e.petitionType,n=e.setPetitionDataParent,c=Object(r.useState)(),a=Object(l.a)(c,2),u=a[0],i=a[1],s=Object(r.useState)(),o=Object(l.a)(s,2),j=o[0],b=o[1],p=Object(r.useState)(),d=Object(l.a)(p,2),O=d[0],v=d[1];Object(r.useEffect)((function(){var e=Ut.filter((function(e){return e.value===parseInt(t)}));1===e.length&&i(e[0])}),[t]);var h=function(e){var r=Object(x.a)(Object(x.a)({},j),e);"2"===t&&(r.type||(r=Object(x.a)({type:"text"},r))),b(r),v(r.type),n(r)};return u?Object(f.jsx)("div",{children:u.fields&&u.fields.map((function(e,t){return Object(f.jsx)(Lt,{field:e,updateFormValue:h,fieldType:O},t)}))}):Object(f.jsx)("div",{})},Ft=function(){var e=Object(r.useContext)($e).coalition,t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)("0"),i=Object(l.a)(u,2),s=i[0],o=i[1],p=Object(r.useState)(),d=Object(l.a)(p,2),O=d[0],x=d[1],v=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,It(e.id,s,O);case 3:a("Created Successfully");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("form",{onSubmit:v,children:[Object(f.jsx)("select",{onChange:function(e){var t=e.target.value;o(t)},children:Ut.map((function(e,t){return Object(f.jsx)("option",{value:e.value,children:e.text},t)}))}),Object(f.jsx)(_t,{petitionType:s,setPetitionDataParent:function(e){x(e)}}),Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:"submit",value:"submit petition"})}),Object(f.jsx)("div",{children:c})]})},Vt=(n(139),n(140),function(e){var t=e.petitionId,n=Object(r.useState)(),c=Object(l.a)(n,2),a=c[0],u=c[1];Object(r.useEffect)((function(){!function(e,t){var n=Object(O.i)(dt(),Object(O.k)("petitionId","==",e),Object(O.k)("userId","==",pt().uid));Object(O.h)(n,(function(e){t(e.docs[0])}))}(t,(function(e){if(e){var t=e.data().selection;u(t)}}))}),[t]);var i=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,xt(t,"yes");case 3:return e.next=5,Nt(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,xt(t,"no");case 3:return e.next=5,Nt(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"vote-box",children:[Object(f.jsx)("input",{type:"button",value:"yes",onClick:i,disabled:"yes"===a}),Object(f.jsx)("input",{type:"button",value:"no",onClick:s,disabled:"no"===a})]})}),Mt=function(e){var t=e.petitionId,n=Object(r.useContext)($e).coalition,c=Object(r.useState)(),a=Object(l.a)(c,2),u=a[0],i=a[1],s=Object(r.useState)(),o=Object(l.a)(s,2),j=o[0],b=o[1];Object(r.useEffect)((function(){return mt(t,(function(e){i(e)}))}),[t]),Object(r.useEffect)((function(){return Bt(n.id,(function(e){b(e)}))}),[n.id]);var p=u&&u.filter((function(e){return"yes"===e.data().selection})).length,d=u&&u.filter((function(e){return"no"===e.data().selection})).length;return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"status-panel",children:[Object(f.jsxs)("span",{children:["Yes: ",p]}),Object(f.jsxs)("span",{children:["No: ",d]}),Object(f.jsxs)("span",{children:["Need: ",j]})]})})},zt=function(e){var t=e.petition,n=e.showVote,c=Object(r.useState)(),a=Object(l.a)(c,2),u=a[0],i=a[1];Object(r.useEffect)((function(){var e=Ut.filter((function(e){return e.value===parseInt(t.data().petitionType)}));1===e.length&&i(e[0])}),[t]);var s=t.data(),o=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,Nt(t.id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"petition-block",children:["Status: ",s.status,Object(f.jsx)("div",{children:u&&u.fields.map((function(e,t){var n=s[e.value];return Object(f.jsxs)("div",{children:[e.text,": ",n]},t)}))}),n&&Object(f.jsx)(Vt,{petitionId:t.id}),Object(f.jsx)(Mt,{petitionId:t.id}),Object(f.jsx)("input",{type:"button",value:"process",onClick:o})]})},Gt=function(e){var t=e.petitions,n=e.showVote;return Object(f.jsx)("div",{children:t&&t.map((function(e,t){return Object(f.jsx)(zt,{petition:e,showVote:n},t)}))})},Yt=function(){var e=Object(r.useContext)($e).coalition,t=Object(r.useState)(),n=Object(l.a)(t,2),c=n[0],a=n[1];Object(r.useEffect)((function(){return St(e.id,(function(e){a(e)}))}),[e.id]);var u=function(){return c.filter((function(e){return"new"===e.data().status}))},i=function(){return c.filter((function(e){return"passed"===e.data().status}))},s=function(){return c.filter((function(e){return"complete"===e.data().status}))};if(!c)return Object(f.jsx)("div",{});var o=c.filter((function(e){return"ready"===e.data().status}));return Object(f.jsxs)("div",{children:[u()&&u().length>0&&Object(f.jsx)("h2",{children:"Open Petitions"}),Object(f.jsx)(Gt,{petitions:u(),showVote:!0}),i()&&i().length>0&&Object(f.jsx)("h2",{children:"Passed Petitions"}),Object(f.jsx)(Gt,{petitions:i(),showVote:!1}),o&&o.length>0&&Object(f.jsx)("h2",{children:"Ready Petitions"}),Object(f.jsx)(Gt,{petitions:o,showVote:!1}),s()&&s().length>0&&Object(f.jsx)("h2",{children:"Completed Petitions"}),Object(f.jsx)(Gt,{petitions:s(),showVote:!1})]})},Ht=h("roles"),Wt=Ht.createDoc,Jt=Ht.getByCoalitionIdSub,Kt=Ht.deleteDocument,Qt=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={coalitionId:t,name:n,memberId:r},e.next=3,Wt(c);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),qt=function(e){var t=e.onSelect,n=Object(r.useContext)($e).coalition,c=Object(r.useState)(),a=Object(l.a)(c,2),u=a[0],i=a[1];Object(r.useEffect)((function(){return U(n.id,i)}),[n.id]);return Object(f.jsxs)("select",{onChange:function(e){t(e.target.value)},children:[Object(f.jsx)("option",{value:"",children:"(none)"}),u&&u.map((function(e,t){var n=e.displayName,r=e.memberId;return Object(f.jsx)("option",{value:r,children:n},t)}))]})},Xt=function(){var e=Object(r.useContext)($e).coalition,t=Object(r.useState)(),n=Object(l.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)(),i=Object(l.a)(u,2),s=i[0],o=i[1],p=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,Qt(e.id,c,s||null);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)("input",{placeholder:"name",onChange:function(e){a(e.target.value)}})}),Object(f.jsx)("td",{children:Object(f.jsx)(qt,{onSelect:function(e){o(e)}})}),Object(f.jsx)("td",{children:Object(f.jsx)("input",{type:"button",placeholder:"member",value:"Add",onClick:p})})]})},Zt=function(e){var t=e.role,n=t.data(),r=n.name,c=n.memberId,a=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,Kt(t.id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:r}),c&&Object(f.jsx)("td",{children:Object(f.jsx)(nt,{userId:c})}),!c&&Object(f.jsx)("td",{children:Object(f.jsx)("i",{children:"(empty)"})}),Object(f.jsx)("input",{type:"button",value:"delete",onClick:a})]})},$t=function(){var e=Object(r.useContext)($e),t=e.isOnlyUser,n=e.coalition,c=Object(r.useState)(),a=Object(l.a)(c,2),u=a[0],i=a[1];return Object(r.useEffect)((function(){return Jt(n.id,i)}),[n.id]),Object(f.jsx)("div",{children:Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"name"}),Object(f.jsx)("th",{children:"member"})]})}),Object(f.jsxs)("tbody",{children:[u&&u.map((function(e,t){return Object(f.jsx)(Zt,{role:e},t)})),t&&Object(f.jsx)(Xt,{})]})]})})},en=function(e){var t=e.coalitionId,n=Object(r.useState)(),c=Object(l.a)(n,2),a=c[0],u=c[1],i=Object(r.useState)(),s=Object(l.a)(i,2),o=s[0],p=s[1],d=Object(r.useState)(),O=Object(l.a)(d,2),x=O[0],v=O[1],h=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,J(t,a,"text",o);case 3:v("complete");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{onSubmit:h,children:["New Rule",Object(f.jsx)("hr",{}),Object(f.jsx)("input",{placeholder:"Rule Name",onChange:function(e){u(e.target.value)}}),Object(f.jsx)("input",{placeholder:"Rule Value",onChange:function(e){p(e.target.value)}}),Object(f.jsx)("input",{type:"submit"}),x]})})},tn=function(){var e=Object(r.useContext)($e).coalition,t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)(""),i=Object(l.a)(u,2),s=i[0],o=i[1],p=Object(r.useState)("text"),d=Object(l.a)(p,2),O=d[0],x=d[1],v=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,J(e.id,c,O,s);case 3:a(""),o(""),x("text");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("tr",{className:"new-rule-row",children:[Object(f.jsx)("td",{children:Object(f.jsx)("input",{placeholder:"name",onChange:function(e){a(e.target.value)},value:c})}),Object(f.jsx)("td",{children:Object(f.jsx)(Rt,{onTypeChange:function(e){switch(e.target.value){case"boolean":o(!1);break;case"text":o("");break;case"number":o(0)}x(e.target.value)}})}),Object(f.jsxs)("td",{children:["text"===O&&Object(f.jsx)("input",{placeholder:"value",onChange:function(e){o(e.target.value)}}),"boolean"===O&&Object(f.jsx)("input",{type:"checkbox",onChange:function(e){o(!s)}}),"number"===O&&Object(f.jsx)("input",{type:"number",placeholder:"value",onChange:function(e){var t=parseInt(e.target.value);o(t)}})]}),Object(f.jsx)("td",{className:"new-rule-add",children:Object(f.jsx)("input",{type:"submit",onClick:v,value:"Add"})})]})},nn=function(e){var t=e.r,n=Object(r.useContext)($e).coalition,c=t.data(),a=c.value,u=c.name,i=Object(r.useState)(!1),s=Object(l.a)(i,2),o=s[0],p=s[1],d=Object(r.useState)(""),O=Object(l.a)(d,2),x=O[0],v=O[1],h=Object(r.useState)(a),m=Object(l.a)(h,2),w=m[0],y=m[1],k=Object(r.useState)(""),g=Object(l.a)(k,2),C=g[0],S=g[1];Object(r.useEffect)((function(){S(!1===a?"false":!0===a?"true":a)}),[a]);var I=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"false"!==w){e.next=6;break}return e.next=4,K(n.id,u,!1);case 4:e.next=13;break;case 6:if("true"!==w){e.next=11;break}return e.next=9,K(n.id,u,!0);case 9:e.next=13;break;case 11:return e.next=13,K(n.id,u,w);case 13:v("Save Successful"),p(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("td",{className:"rule-value-col",onClick:function(e){p(!0)},onBlur:function(e){a===w&&p(!1)},children:[!o&&C,o&&Object(f.jsxs)("form",{onSubmit:I,children:[Object(f.jsx)("input",{value:w,onChange:function(e){y(e.target.value)}}),Object(f.jsx)("input",{type:"submit",value:"update"}),Object(f.jsx)("input",{type:"button",onClick:function(e){y(a),p(!1)},value:"cancel"})]}),Object(f.jsx)("span",{className:"rule-edit-message",children:x})]})},rn=(n(99),function(){var e=Object(r.useContext)($e),t=e.isOnlyUser,n=e.coalition,c=Object(r.useState)(),a=Object(l.a)(c,2),u=a[0],i=a[1];if(Object(r.useEffect)((function(){return z(n.id,(function(e){return i(e)}))}),[n.id]),!u||0===u.length)return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:"No rules yet..."}),Object(f.jsxs)("div",{children:["   ",t&&Object(f.jsx)(en,{coalitionId:n.id})]})]});var s=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{children:Object(f.jsxs)("table",{className:"rule-table",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"name"}),Object(f.jsx)("th",{children:"type"}),Object(f.jsx)("th",{children:"value"})]})}),Object(f.jsxs)("tbody",{children:[u&&u.map((function(e,n){return Object(f.jsxs)("tr",{children:[Object(f.jsxs)("td",{className:"rule-name-col",children:[" ",e.data().name]}),Object(f.jsxs)("td",{className:"rule-name-col",children:[" ",e.data().type]}),Object(f.jsx)(nn,{r:e}),t&&Object(f.jsx)("td",{children:Object(f.jsx)("input",{type:"button",value:"delete",onClick:function(){return s(e.id)}})})]},n)})),t&&Object(f.jsx)(tn,{})]})]})})}),cn=function(){var e=Object(r.useContext)($e).isOnlyUser;return Object(f.jsx)("div",{children:e&&Object(f.jsx)("div",{children:"Only User Mode"})})},an=function(){var e=Object(r.useContext)($e),t=e.isOnlyUser,n=e.coalition,c=Object(r.useState)(n.data().charter),a=Object(l.a)(c,2),u=a[0],i=a[1],s=Object(r.useState)(""),o=Object(l.a)(s,2),p=o[0],d=o[1],O=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,He(n.id,u);case 3:d("Updated");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:"Charter:"}),!t&&Object(f.jsx)("textarea",{disabled:!t,value:u}),t&&Object(f.jsxs)("form",{onSubmit:O,children:[Object(f.jsx)("textarea",{onChange:function(e){i(e.target.value),d("")},value:u}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"submit"}),p]})]})},un=function(){var e=Object(r.useContext)($e).coalition;return Object(f.jsx)("a",{href:Ge(e.id),children:"Coalition Link"})},sn=function(){var e=Object(r.useContext)($e).coalition;return Object(f.jsxs)("h2",{children:[" ",e.data().name]})},on=function(){var e=Object(r.useContext)($e),t=e.coalition,n=e.isCreator,c=Object(r.useState)(!1),a=Object(l.a)(c,2),u=a[0],i=a[1];return n?Object(f.jsxs)("div",{children:["Creator things",Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:"button",value:"Delete Coalition",onClick:function(e){e.preventDefault(),u?(Re(t.id),i(!1)):i(!0)}})}),Object(f.jsx)("div",{children:u&&Object(f.jsx)("div",{children:"Delete?"})})]}):Object(f.jsx)("div",{})},jn=function(){var e=Object(r.useContext)($e).coalition,t=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,Ke(e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:"button",value:"Join "+e.data().name,onClick:t})})},bn=function(){var e=Object(r.useContext)($e).coalition,t=Object(r.useState)(!1),n=Object(l.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)(!1),i=Object(l.a)(u,2),o=i[0],p=i[1],d=Object(r.useState)(!1),O=Object(l.a)(d,2),x=O[0],v=O[1];Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(e.id);case 2:n=t.sent,v(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.id]);var h=Object(s.g)(),m=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),c){t.next=5;break}a(!0),t.next=14;break;case 5:return t.prev=5,t.next=8,P(e.id);case 8:h("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),p(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e){return t.apply(this,arguments)}}();return x?Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"button",onClick:m,value:"Leave "+e.data().name}),c&&Object(f.jsx)("div",{children:"click again to confirm"}),Object(f.jsx)("div",{children:o})]}):Object(f.jsx)(jn,{})},ln=function(e){var t=e.coalitionId;return t?Object(f.jsx)(et,{coalitionId:t,children:Object(f.jsxs)("div",{children:[Object(f.jsx)(sn,{}),Object(f.jsx)(cn,{}),Object(f.jsx)(un,{}),Object(f.jsx)(p,{headerText:"Members",children:Object(f.jsx)(rt,{})}),Object(f.jsx)(p,{headerText:"Charter",children:Object(f.jsx)(an,{})}),Object(f.jsx)(p,{headerText:"Messages",children:Object(f.jsx)(lt,{})}),Object(f.jsx)(p,{headerText:"Roles",children:Object(f.jsx)($t,{})}),Object(f.jsx)(p,{headerText:"Rules",children:Object(f.jsx)(rn,{})}),Object(f.jsx)(p,{headerText:"Invite",children:Object(f.jsx)(tt,{})}),Object(f.jsx)(p,{headerText:"New Petition",children:Object(f.jsx)(Ft,{})}),Object(f.jsx)(p,{headerText:"Petitions",children:Object(f.jsx)(Yt,{})}),Object(f.jsx)(bn,{}),Object(f.jsx)(on,{})]})}):Object(f.jsx)("div",{})},fn=function(){var e=Object(s.h)(),t=Object(r.useState)(),n=Object(l.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)(),i=Object(l.a)(u,2),o=i[0],p=i[1],d=Object(r.useState)(),O=Object(l.a)(d,2),x=O[0],v=O[1];return Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ze(e.coalitionId);case 3:n=t.sent,a(n),p(e.coalitionId),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),v(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();t()}),[e.coalitionId]),x?Object(f.jsx)("div",{children:x}):c?Object(f.jsx)(ln,{selectedCoalition:c,coalitionId:o}):Object(f.jsx)("div",{children:"Loading..."})},pn=function(e){var t=e.isDirty,n=e.setIsDirty,c=e.setSelectedCoalition,a=e.setCoalitionId,u=Object(r.useState)(),i=Object(l.a)(u,2),s=i[0],o=i[1],p=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e();case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){t&&p(),t&&n(!1),console.log("This is mounted or updated.")}),[t,n]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"My coalitions"}),s&&s.map((function(e,t){return Object(f.jsxs)("div",{children:[e.data().name,Object(f.jsx)("input",{type:"button",value:"open",onClick:function(t){c(e),a(e.id)}})]},t)}))]})},dn=function(e){var t=e.setIsDirty,n=Object(r.useState)(),c=Object(l.a)(n,2),a=c[0],u=c[1],i=Object(r.useState)(!1),s=Object(l.a)(i,2),o=s[0],p=s[1],d=Object(r.useState)(!1),O=Object(l.a)(d,2),x=O[0],v=O[1],h=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,Le(a,o,x);case 3:t(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{children:["Add New Coalition",Object(f.jsxs)("form",{onSubmit:h,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"name"})," ",Object(f.jsx)("input",{onChange:function(e){u(e.target.value)},value:a})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"public?"})," ",Object(f.jsx)("input",{type:"checkbox",value:o,onChange:function(e){p(!o)}})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"show usernames?"})," ",Object(f.jsx)("input",{type:"checkbox",onChange:function(e){v(!x)},checked:x})]}),Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:"submit"})})]})]})},On=function(){var e=Object(r.useState)(!0),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(),u=Object(l.a)(a,2),i=u[0],s=u[1],o=Object(r.useState)(),j=Object(l.a)(o,2),b=j[0],p=j[1];return Object(f.jsxs)("div",{className:"widget-panel",children:[Object(f.jsx)(pn,{isDirty:n,setIsDirty:c,setSelectedCoalition:s,setCoalitionId:p}),Object(f.jsx)(dn,{setIsDirty:c}),i&&Object(f.jsx)(ln,{selectedCoalition:i,coalitionId:b})]})},xn=function(){var e=Object(i.b)(),t=Object(l.a)(e,1)[0],n=Object(s.g)(),c=Object(r.useState)(),a=Object(l.a)(c,2),u=a[0],o=a[1],p=Object(r.useState)(),d=Object(l.a)(p,2),O=d[0],x=d[1],v=Object(r.useState)(),h=Object(l.a)(v,2),m=h[0],w=h[1],y=Object(r.useState)(!1),k=Object(l.a)(y,2),g=k[0],C=k[1];console.log(t),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get("id"),w(n),e.next=4,Ye(n);case 4:return r=e.sent,e.next=7,S();case 7:e.sent.indexOf(r.id)>-1&&C(!0),o(r),x(r.data());case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var I=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Ee(m);case 3:n("/coalition/"+u.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return O?g?Object(f.jsxs)("div",{children:["You are a member of ",O.name," "]}):Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:["You've been invited to join ",O.name]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Charter:"}),Object(f.jsx)("p",{children:O.charter})]}),Object(f.jsx)("input",{type:"button",onClick:I,value:"Accept"})]}):Object(f.jsx)("div",{children:"Loading..."})},vn=function(){return Object(f.jsxs)("div",{className:"rules-page",children:[Object(f.jsx)("h3",{children:"System Rules Help"}),Object(f.jsx)("p",{children:"The below rules can be used to achieve the specified function in a coalition."}),Object(f.jsx)(me,{})]})},hn=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),u=Object(l.a)(a,2),i=u[0],s=u[1],o=Object(r.useState)(""),p=Object(l.a)(o,2),d=p[0],O=p[1],v=Object(r.useState)(""),h=Object(l.a)(v,2),m=h[0],w=h[1],y=Object(r.useState)(!1),k=Object(l.a)(y,2),g=k[0],C=k[1],S=Object(r.useState)(""),I=Object(l.a)(S,2),D=I[0],N=I[1],E=Object(r.useState)(!1),T=Object(l.a)(E,2),B=T[0],A=T[1],P=Object(r.useState)(""),R=Object(l.a)(P,2),L=R[0],U=R[1];Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:t=e.sent,c(t),n=t.data(),r=n.displayName,a=n.pronouns,s(r),w(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var _=function(){var e=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=Object(x.a)(Object(x.a)({},n.data()),{},{displayName:i,pronouns:m}),e.next=4,ee(n.id,r);case 4:O("update successful");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(D,L);case 2:n=e.sent,e.t0=n.valid,e.next=!1===e.t0?6:null===e.t0?8:!0===e.t0?10:12;break;case 6:case 12:return alert(n.message),e.abrupt("break",14);case 8:return A(!0),e.abrupt("break",14);case 10:return alert("success"),e.abrupt("break",14);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(f.jsxs)("div",{children:[Object(f.jsxs)("form",{onSubmit:_,children:[Object(f.jsx)("label",{children:"Display name"}),Object(f.jsx)("input",{type:"text",value:i,onChange:function(e){s(e.target.value),O("")}}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"Pronouns"}),Object(f.jsx)("input",{type:"text",value:m,onChange:function(e){e.preventDefault(),w(e.target.value),O("")}})]}),Object(f.jsx)("input",{type:"submit",value:"Save"})]}),Object(f.jsx)("hr",{}),Object(f.jsxs)("form",{onSubmit:F,children:[Object(f.jsx)("input",{type:"button",onClick:function(e){C(!g)},value:"Change account email"}),g&&Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"Enter new email"}),Object(f.jsx)("input",{autoFocus:!0,value:D,onChange:function(e){N(e.target.value),O("")}}),Object(f.jsx)("input",{type:"submit",value:"Submit"}),B&&Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"Confirm password to continue"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{autoFocus:!0,type:"password",value:L,onChange:function(e){U(e.target.value)}}),Object(f.jsx)("input",{type:"submit",value:"Confirm"})]})]})]})]}),Object(f.jsx)("div",{children:d})]}):Object(f.jsx)("div",{children:"Loading..."})},mn=n(217),wn=function(){return Object(f.jsxs)(mn.a,{children:[Object(f.jsx)("div",{children:"Home"}),Object(f.jsx)(On,{})]})};var yn=function(){var e=Object(d.b)(),t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)(""),i=Object(l.a)(u,2),s=i[0],o=i[1],p=Object(r.useState)(),O=Object(l.a)(p,2),x=O[0],v=O[1],h=Object(r.useState)(),m=Object(l.a)(h,2),w=m[0],y=m[1],k=Object(r.useState)(!1),g=Object(l.a)(k,2),C=g[0],S=g[1];return Object(r.useEffect)((function(){return S(!0),function(){S(!1)}}),[]),Object(d.c)(e,(function(e){e?C&&v(e):C&&v(null)})),Object(f.jsxs)("div",{children:[x&&Object(f.jsx)("div",{children:x.email}),!x&&"no user",Object(f.jsxs)("form",{children:[Object(f.jsx)("input",{placeholder:"email",onChange:function(e){a(e.target.value)}}),Object(f.jsx)("input",{type:"password",placeholder:"password",autoComplete:"on",onChange:function(e){o(e.target.value)}}),Object(f.jsx)("input",{type:"button",onClick:function(){Object(d.d)(e,c,s).then((function(e){})).catch((function(e){var t=e.message;y(t)}))},value:"Sign In"}),Object(f.jsx)("input",{type:"button",onClick:function(){Object(d.a)(e,c,s).then(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t.user.uid);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=e.message;y(t)}))},value:"Create New User"})]}),Object(f.jsx)("div",{children:w})]})};var kn=function(){var e=Object(d.b)(),t=Object(r.useState)(),n=Object(l.a)(t,2),c=n[0],a=n[1];return Object(d.c)(e,(function(e){a(e||null)})),Object(f.jsxs)("div",{children:[c&&Object(f.jsx)("div",{}),!c&&Object(f.jsx)(yn,{})]})},gn=function(e){var t=Object(d.b)(),n=Object(r.useState)(),c=Object(l.a)(n,2),a=c[0],u=c[1];return Object(d.c)(t,(function(e){u(e||null)})),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:Object(f.jsx)(kn,{})}),Object(f.jsx)("div",{children:a&&e.children})]})},Cn=n(104),Sn={apiKey:window._env_&&window._env_.FIREBASE_API_KEY||"AIzaSyAfQe2YjUh4yxN6Ax0ooIIgvb9RHGDTTKw",authDomain:"coalition-ba367.firebaseapp.com",projectId:"coalition-ba367",storageBucket:"coalition-ba367.appspot.com",messagingSenderId:"1016116125256",appId:window._env_&&window._env_.FIREBASE_APP_ID||"1:1016116125256:web:21badede89212eb844027d"},In=Object(Cn.a)(Sn),Dn=function(e){var t=e.children;return Object(f.jsx)("div",{children:In&&t})},Nn=n(219),En=n(218),Tn=n(215),Bn=n(220),An=n(214),Pn=n(207),Rn=n(105),Ln=n.n(Rn),Un=n(213),_n=n(212),Fn=n(211),Vn=n(206),Mn=n(210),zn=n(88),Gn=n.n(zn),Yn=n(204),Hn=[{text:"Search",value:"browse"},{text:"Admin",value:"admin"},{text:"Help",value:"rules"},{text:"Dashboard",value:"dashboard"},{text:"Code",value:"https://github.com/eyarham/coalition",isExternal:!0}],Wn=[{text:"Account",value:"account"},{text:"Admin",value:"admin"},{text:"Logout",value:"logout"}],Jn=function(){var e=Object(s.g)(),t=Object(d.b)(),n=c.a.useState(null),a=Object(l.a)(n,2),u=a[0],i=a[1],o=c.a.useState(null),j=Object(l.a)(o,2),b=j[0],p=j[1],O=c.a.useState(null),x=Object(l.a)(O,2),v=x[0],h=x[1],m=Object(r.useState)(),w=Object(l.a)(m,2),y=w[0],k=w[1];Object(d.c)(t,(function(e){e?(k(e),h(e.email.charAt(0))):k(null)}));var g=function(t,n){n?window.open(t,"_blank"):e("/"+t)};return Object(f.jsx)(En.a,{position:"static",children:Object(f.jsx)(Un.a,{maxWidth:"xl",children:Object(f.jsxs)(Tn.a,{disableGutters:!0,children:[Object(f.jsx)(Gn.a,{sx:{display:{xs:"none",md:"flex"},mr:1}}),Object(f.jsx)(An.a,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"Coalition"}),Object(f.jsxs)(mn.a,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[Object(f.jsx)(Bn.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",children:Object(f.jsx)(Ln.a,{})}),Object(f.jsx)(Pn.a,{id:"menu-appbar",anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(u),onClose:function(e){i(null)},sx:{display:{xs:"block",md:"none"}},children:Hn.map((function(e){return Object(f.jsx)(Mn.a,{onClick:function(){return g(e.value,e.isExternal)},children:Object(f.jsx)(An.a,{textAlign:"center",children:e.text})},e.value)}))})]}),Object(f.jsx)(Gn.a,{sx:{display:{xs:"flex",md:"none"},mr:1}}),Object(f.jsx)(An.a,{variant:"h5",noWrap:!0,component:"a",href:"",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"COALITION"}),Object(f.jsx)(mn.a,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:Hn.map((function(e){return Object(f.jsx)(Fn.a,{onClick:function(){return g(e.value,e.isExternal)},sx:{my:2,color:"white",display:"block"},children:e.text},e.value)}))}),Object(f.jsxs)(mn.a,{sx:{flexGrow:0},children:[Object(f.jsx)(Vn.a,{title:"Open settings",children:Object(f.jsx)(Bn.a,{onClick:function(e){p(e.currentTarget)},sx:{p:0},children:Object(f.jsx)(_n.a,{children:v})})}),Object(f.jsxs)(Pn.a,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:b,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(b),onClose:function(){p(null)},children:[y&&Object(f.jsx)(Mn.a,{children:y.email}),Object(f.jsx)(Yn.a,{}),Wn.map((function(e){return Object(f.jsx)(Mn.a,{onClick:function(){return g(e.value,e.isExternal)},children:Object(f.jsx)(An.a,{textAlign:"center",children:e.text})},e.value)}))]})]})]})})})},Kn=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)(Dn,{children:[Object(f.jsx)(Nn.a,{}),Object(f.jsx)(gn,{children:Object(f.jsx)(Ze,{children:Object(f.jsxs)("div",{children:[Object(f.jsx)(Jn,{}),Object(f.jsx)(s.a,{})]})})})]})})},Qn=function(){return Object(f.jsx)(s.d,{children:Object(f.jsxs)(s.b,{path:"/",element:Object(f.jsx)(Kn,{}),children:[Object(f.jsx)(s.b,{path:"/",element:Object(f.jsx)(wn,{})}),Object(f.jsx)(s.b,{path:"/invite",element:Object(f.jsx)(xn,{})}),Object(f.jsx)(s.b,{path:"/account",element:Object(f.jsx)(hn,{})}),Object(f.jsx)(s.b,{path:"/coalition/:coalitionId",element:Object(f.jsx)(fn,{})}),Object(f.jsx)(s.b,{path:"/browse",element:Object(f.jsx)(qe,{})}),Object(f.jsx)(s.b,{path:"/admin",element:Object(f.jsx)(we,{})}),Object(f.jsx)(s.b,{path:"/rules",element:Object(f.jsx)(vn,{})}),Object(f.jsx)(s.b,{path:"/dashboard",element:Object(f.jsx)(On,{})}),Object(f.jsx)(s.b,{path:"/logout",element:Object(f.jsx)(ye,{})})]})})};var qn=function(){return Object(f.jsx)(Qn,{})},Xn=(n(148),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,221)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),a(e),u(e)}))});u.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(i.a,{children:Object(f.jsx)(qn,{})})}),document.getElementById("root")),Xn()},99:function(e,t,n){}},[[149,1,2]]]);
//# sourceMappingURL=main.132f6731.chunk.js.map